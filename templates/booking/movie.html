{% extends "base.html" %}
{% load staticfiles %}
{% block title %} Movie {{ object.title }} | {{ site.name }} {% endblock %}


{% block content %}
<!-- Search bar -->
{% include "includes/movie-search.html"%}  
<section class="container">
    <div class="col-sm-8 col-md-9">
        <div class="movie">
            <h2 class="page-heading">{{ object.title }}</h2>
            <div class="movie__info">
                <div class="col-sm-6 col-md-4 movie-mobile">
                    <div class="movie__images">
                        <span class="movie__rating">{{ object.get_avg_rating|floatformat }}</span>
                        <img alt='' src="{{MEDIA_URL}}{{object.image_thumbnail}}">
                    </div>
                    <div class="movie__rate">Your vote: <div id='score' class="score"></div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-8">
                    <p class="movie__time">{{ object.duration }} min</p>
                    <p class="movie__option"><strong>Country: </strong><a href="#">{{ object.city }}</a>, <a href="#">{{ object.country }}</a></p>
                    <p class="movie__option"><strong>Year: </strong><a href="#">{{ object.release_date|date:"Y" }}</a></p>
                    <p class="movie__option"><strong>Category: </strong>
                    {% for category in movie.categories.all %}
                        <a href="#">{{ category.name }}</a>
                        {% if not forloop.last %}
                            ,                       
                        {% endif%}
                    {% endfor %}   
                    </p>
                    <p class="movie__option"><strong>Release date: </strong>{{ object.release_date|date:"d-m-Y" }}</p>
                    <p class="movie__option"><strong>Director: </strong><a href="#">{{ object.director }}</a></p>
                    <p class="movie__option"><strong>Actors: </strong>
                        {{ object.cast }}...
                    </p>
                    {% if object.age_restriction%}
                        <p class="movie__option"><strong>Age restriction: </strong><a href="#">{{ object.age_restriction }}</a></p>
                    {% endif %}

                    <div class="movie__btns">
                        <a href="#" class="btn btn-md btn--warning">book a ticket for this movie</a>
                        <!--<a href="#" class="watchlist">Add to watchlist</a>-->
                    </div>

                    <div class="share">
                        <span class="share__marker">Share: </span>
                        <div class="addthis_toolbox addthis_default_style ">
                            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                            <a class="addthis_button_tweet"></a>
                            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>

            <h2 class="page-heading">The plot</h2>

            <p class="movie__describe">{{ object.description }}</p>

            
        </div>

        <h2 class="page-heading">showtime &amp; tickets</h2>
        <div class="choose-container">
            <form id='select' class="select" method='get'>
                <select name="select_item" id="select-sort" class="select__sort" tabindex="0">
                    <option value="1" selected='selected'>London</option>
                    <option value="2">New York</option>
                    <option value="3">Paris</option>
                    <option value="4">Berlin</option>
                    <option value="5">Moscow</option>
                    <option value="3">Minsk</option>
                    <option value="4">Warsawa</option>
                    <option value="5">Kiev</option>
                </select>
            </form>

            <div class="datepicker">
                <span class="datepicker__marker"><i class="fa fa-calendar"></i>Date</span>
                <input type="text" id="datepicker" value='03/10/2014' class="datepicker__input">
            </div>

            <a href="#" id="map-switch" class="watchlist watchlist--map"><span class="show-map">Show cinemas on map</span><span  class="show-time">Show cinema time table</span></a>

            <div class="clearfix"></div>

            <div class="time-select">
                <div class="time-select__group group--first">
                    <div class="col-sm-4">
                        <p class="time-select__place">Cineworld</p>
                    </div>
                    <ul class="col-sm-8 items-wrap">
                        <li class="time-select__item" data-time='09:40'>09:40</li>
                        <li class="time-select__item" data-time='13:45'>13:45</li>
                        <li class="time-select__item active" data-time='15:45'>15:45</li>
                        <li class="time-select__item" data-time='19:50'>19:50</li>
                        <li class="time-select__item" data-time='21:50'>21:50</li>
                    </ul>
                </div>

                <div class="time-select__group">
                <div class="col-sm-4">
                    <p class="time-select__place">Empire</p>
                </div>
                <ul class="col-sm-8 items-wrap">
                    <li class="time-select__item" data-time='10:45'>10:45</li>
                    <li class="time-select__item" data-time='16:00'>16:00</li>
                    <li class="time-select__item" data-time='19:00'>19:00</li>
                    <li class="time-select__item" data-time='21:15'>21:15</li>
                    <li class="time-select__item" data-time='23:00'>23:00</li>
                </ul>
            </div>

            <div class="time-select__group">
                <div class="col-sm-4">
                    <p class="time-select__place">Curzon</p>
                </div>
                <ul class="col-sm-8 items-wrap">
                    <li class="time-select__item" data-time='09:00'>09:00</li>
                    <li class="time-select__item" data-time='11:00'>11:00</li>
                    <li class="time-select__item" data-time='13:00'>13:00</li>
                    <li class="time-select__item" data-time='15:00'>15:00</li>
                    <li class="time-select__item" data-time='17:00'>17:00</li>
                    <li class="time-select__item" data-time='19:0'>19:00</li>
                    <li class="time-select__item" data-time='21:0'>21:00</li>
                    <li class="time-select__item" data-time='23:0'>23:00</li>
                    <li class="time-select__item" data-time='01:0'>01:00</li>
                </ul>
            </div>

            <div class="time-select__group">
                <div class="col-sm-4">
                    <p class="time-select__place">Odeon</p>
                </div>
                <ul class="col-sm-8 items-wrap">
                    <li class="time-select__item" data-time='10:45'>10:45</li>
                    <li class="time-select__item" data-time='16:00'>16:00</li>
                    <li class="time-select__item" data-time='19:00'>19:00</li>
                    <li class="time-select__item" data-time='21:15'>21:15</li>
                    <li class="time-select__item" data-time='23:00'>23:00</li>
                </ul>
            </div>

            <div class="time-select__group group--last">
                <div class="col-sm-4">
                    <p class="time-select__place">Picturehouse</p>
                </div>
                <ul class="col-sm-8 items-wrap">
                    <li class="time-select__item" data-time='17:45'>17:45</li>
                    <li class="time-select__item" data-time='21:30'>21:30</li>
                    <li class="time-select__item" data-time='02:20'>02:20</li>
                </ul>
            </div>
        </div>
        <!-- hiden maps with multiple locator-->
        <div  class="map">
            <div id='cimenas-map'></div> 
        </div>
    </div>
</div>

{# {% include "includes/movie-aside-banner.html"%} #}

</section>

{% endblock %}

{% block scripts %}

<!-- jQuery UI -->
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

<!-- Mobile menu -->
<script src="{% static "js/jquery.mobile.menu.js" %}"></script>
<!-- Select -->
<script src="{% static "js/external/jquery.selectbox-0.2.min.js" %}"></script>

<!-- Stars rate -->
<script src="{% static "js/external/jquery.raty.js" %}"></script>
<!-- Swiper slider -->
<script src="{% static "js/external/idangerous.swiper.min.js" %}"></script>
<!-- Magnific-popup -->
<script src="{% static "js/external/jquery.magnific-popup.min.js" %}"></script> 

<!--*** Google map  ***-->
<script src="https://maps.google.com/maps/api/js"></script> 
<!--*** Google map infobox  ***-->
<script src="{% static "js/external/infobox.js" %}"></script> 

<!-- Share buttons
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-525fd5e9061e7ef0"></script>
-->
<!-- Form element -->
<script src="{% static "js/external/form-element.js" %}"></script>
<!-- Form validation -->
<script src="{% static "js/form.js" %}"></script>

<!-- Custom -->
<script src="{% static "js/custom.js" %}"></script>

<script type="text/javascript">
    $(document).ready(function() {
        init_MoviePage();

        $.fn.raty.defaults.path = "{{ STATIC_URL }}images/rate";
        $.fn.raty.defaults.size = 24;
            
        $.fn.raty.defaults.starOn = "star-on.png";
        $.fn.raty.defaults.starHalf = "star-half.png";
        $.fn.raty.defaults.half = true;
        $.fn.raty.defaults.single = false;
            
        $('.score').raty({
            half: false,
            score: function() {
                return $(this).attr('data-score');
            },
            cancel: false,
            readOnly: true,
            score: "{{vote.rating}}"
        });
    });
</script>
{% endblock%}
